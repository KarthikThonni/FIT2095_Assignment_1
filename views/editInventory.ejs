<!DOCTYPE html>
<%- include("partials/header", { title: "Edit Inventory", studentId }) %>

<div class="container my-4">
  <h1 class="mb-3">Edit Inventory Item</h1>

  <% if (typeof error !== "undefined" && error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %>

  <form method="POST" action="/api/edit-inventory-<%= studentId %>" class="row g-3">
    <input type="hidden" name="inventoryId" value="<%= item.inventoryId %>">

    <div class="col-md-6">
      <label class="form-label">User ID</label>
      <input class="form-control" value="<%= user?.userId %>" readonly>
    </div>

    <div class="col-md-6">
      <label class="form-label">Ingredient Name</label>
      <input name="ingredientName" class="form-control" value="<%= item.ingredientName %>" required>
    </div>

    <div class="col-md-4">
      <label class="form-label">Quantity</label>
      <input name="quantity" type="number" step="0.01" min="0" class="form-control" value="<%= item.quantity %>" required>
    </div>

    <div class="col-md-4">
      <label class="form-label">Unit</label>
      <select name="unit" class="form-select" required>
        <% units.forEach(u => { %>
          <option value="<%= u %>" <%= item.unit===u?'selected':'' %>><%= u %></option>
        <% }) %>
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Category</label>
      <select name="category" class="form-select" required>
        <% categories.forEach(c => { %>
          <option value="<%= c %>" <%= item.category===c?'selected':'' %>><%= c %></option>
        <% }) %>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Purchase Date (YYYY-MM-DD)</label>
      <input name="purchaseDate" class="form-control" value="<%= item.purchaseDate %>" required>
    </div>

    <div class="col-md-6">
      <label class="form-label">Expiration Date (YYYY-MM-DD)</label>
      <input name="expirationDate" class="form-control" value="<%= item.expirationDate %>" required>
    </div>

    <div class="col-md-6">
      <label class="form-label">Location</label>
      <select name="location" class="form-select" required>
        <% locations.forEach(l => { %>
          <option value="<%= l %>" <%= item.location===l?'selected':'' %>><%= l %></option>
        <% }) %>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Cost ($)</label>
      <input name="cost" type="number" step="0.01" min="0" class="form-control" value="<%= item.cost %>" required>
    </div>

    <div class="col-md-6">
      <label class="form-label">Created Date (YYYY-MM-DD)</label>
      <input name="createdDate" class="form-control" value="<%= item.createdDate %>" required>
    </div>

    <div class="col-12">
      <button class="btn btn-primary">Save Changes</button>
      <a href="/inventory-<%= studentId %>" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</div>

<%- include("partials/footer") %>
