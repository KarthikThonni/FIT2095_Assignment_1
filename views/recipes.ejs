<!DOCTYPE html>
<%- include("partials/header", { title: "All Recipes", studentId }) %>

  <div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1 class="m-0">📘 All Recipes</h1>
      <div class="d-flex gap-2">
        <a href="/add-recipe-<%= studentId %>" class="btn btn-success">＋ Add Recipe</a>
        <a href="/filter-recipes-<%= studentId %>" class="btn btn-outline-dark">🔎 Filter</a>
        <a href="/search-recipes-<%= studentId %>" class="btn btn-outline-dark">🔍 Search</a>
      </div>
    </div>

    <% if (recipes.length === 0) { %>
      <div class="alert alert-warning">No recipes found.</div>
    <% } else { %>
      <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Chef</th>
              <th>Meal</th>
              <th>Cuisine</th>
              <th>Difficulty</th>
              <th>Prep (min)</th>
              <th>Servings</th>
              <th style="width:180px;">Actions</th>
            </tr>
          </thead>
          <tbody>
          <% recipes.forEach(r => { %>
            <tr>
              <td><%= r.recipeId %></td>
              <td><%= r.title %></td>
              <td><%= r.chef %></td>
              <td><%= r.mealType %></td>
              <td><%= r.cuisineType %></td>
              <td><%= r.difficulty %></td>
              <td><%= r.prepTime %></td>
              <td><%= r.servings %></td>
              <td class="d-flex flex-wrap gap-2">
                <!-- NEW: Scale link -->
                <a
                  class="btn btn-sm btn-outline-primary"
                  href="/scale-recipe-<%= studentId %>?recipeId=<%= encodeURIComponent(r.recipeId) %>"
                  title="Scale servings">
                  ⚖️ Scale
                </a>

                
                <a
                  class="btn btn-sm btn-outline-danger"
                  href="/delete-recipe-<%= studentId %>?recipeId=<%= encodeURIComponent(r.recipeId) %>"
                  title="Delete with confirmation">
                  🗑 Delete
                </a>
              </td>
            </tr>
          <% }) %>
          </tbody>
        </table>
      </div>
    <% } %>
  </div>

<%- include("partials/footer") %>

