<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Delete Recipe</title>
  <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
</head>
<body class="bg-light">

  <div class="container my-5">
    <h1 class="text-danger mb-4">ðŸ—‘ Delete Recipe</h1>

    <% if (query && query.msg) { %>
      <div class="alert alert-warning"><%= query.msg %></div>
    <% } %>

    <form method="POST" action="/api/delete-recipe-<%= studentId %>">
      <div class="mb-3">
        <label class="form-label">Select Recipe to Delete</label>
        <select name="recipeId" class="form-select" onchange="this.form.submit()">
          <% allRecipes.forEach(r => { %>
            <option value="<%= r.recipeId %>" <%= r.recipeId === selectedId ? 'selected' : '' %>>
              <%= r.recipeId %> - <%= r.title %>
            </option>
          <% }) %>
        </select>
      </div>

      <% if (selected) { %>
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title"><%= selected.title %></h5>
            <p><strong>ID:</strong> <%= selected.recipeId %></p>
            <p><strong>Cuisine:</strong> <%= selected.cuisineType %></p>
            <p><strong>Meal Type:</strong> <%= selected.mealType %></p>
            <p><strong>Difficulty:</strong> <%= selected.difficulty %></p>
            <p><strong>Prep Time:</strong> <%= selected.prepTime %> mins</p>
            <p><strong>Servings:</strong> <%= selected.servings %></p>
          </div>
        </div>
      <% } %>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="confirm" name="confirm">
        <label class="form-check-label" for="confirm">
          I understand this action cannot be undone and I want to permanently delete this recipe.
        </label>
      </div>

      <button type="submit" class="btn btn-danger">Delete Recipe</button>
      <a href="/recipes-<%= studentId %>" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
</body>
</html>
